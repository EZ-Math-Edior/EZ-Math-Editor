(this.webpackJsonpexme=this.webpackJsonpexme||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){},263:function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o),r=n(29),c=n.n(r),i=(n(119),n(19)),a=n(20),l=n(22),u=n(21),d=(n(45),n(120),n(3));var h=function(){return Object(d.jsx)("nav",{className:"Home",children:Object(d.jsx)("h1",{children:"EZ-Math Editor"})})},p=(n(122),n(75),n(70));n(123),n(265);p.a.initializeApp({apiKey:"AIzaSyBIZUh5JGnR3ZuHRHEH_-Scodkf7iHsTXE",authDomain:"ez-math-editor.firebaseapp.com",projectId:"ez-math-editor",storageBucket:"ez-math-editor.appspot.com",messagingSenderId:"254306906260",appId:"1:254306906260:web:c1e08043359d912454c481",measurementId:"G-FEDCPCWDRR"});var f=p.a,b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).flush=function(){o.setState({key:null,title:"",currQuestion:0,currScore:0,startedTest:!1,finishedTest:!1,questions:[],averageScore:0,totalTakers:0})},o.onAnswerChosen=function(e){if(e){var t=o.state.currScore;o.setState({currScore:t+1})}var n=o.state.currQuestion+1;n<o.state.questions.length?o.setState({currQuestion:n}):o.setState({finishedTest:!0},(function(){o.onTestFinish()}))},o.onTestFinish=function(){f.firestore().collection("tests").doc(o.state.key).get().then((function(e){e.exists?o.updateMaster(e.data().sumScore,e.data().sumTakers):alert("test not found!")})).catch((function(e){console.log("error during query and load func")}))},o.updateMaster=function(e,t){var n=e+o.state.currScore,s=t+1,r=Math.round(n/(s*o.state.questions.length)*100)/100;o.setState({averageScore:r,totalTakers:s},(function(){f.firestore().collection("tests").doc(o.state.key).update({sumScore:n,sumTakers:s}).catch((function(e){console.log("error turing update op")}))}))},o.onTestInit=function(){o.queryTestDB()},o.parseQuestions=function(e){console.log(e);var t=JSON.parse(e).ops.map((function(e){return e.insert})),n="";t.forEach((function(e){e.formula?console.log(e):n+=e})),n.split("\n").forEach((function(e){console.log(e);var t=e.split(";;");if(t.length>3){for(var n="",s=[],r=0;r<t.length;++r)console.log(t[r]),0===r?n=t[r]:r===t.length-1?s[t[r]-1].isCorrect=!0:s.push({answerText:t[r],isCorrect:!1});console.log(n),console.log(s),o.addQuestion(n,s)}})),console.log(o.state.questions),0===o.state.questions.length?(alert("invalid test"),o.flush()):o.setState({startedTest:!0})},o.queryTestDB=function(){var e=prompt("Enter test key: ");e&&(o.setState({key:e}),f.firestore().collection("tests").doc(e).get().then((function(e){e.exists?o.testSetup(e.data().title,e.data().body):alert("test not found!")})).catch((function(e){console.log("error during query and load func")})))},o.testSetup=function(e,t){o.setState({title:e},(function(){o.parseQuestions(t)}))},o.addQuestion=function(e,t){var n=o.state.questions,s={prompt:e,choices:t};n.push(s),o.setState({questions:n})},o.state={key:null,title:"",currQuestion:0,currScore:0,startedTest:!1,finishedTest:!1,questions:[],averageScore:0,totalTakers:0},o}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"mcapp",children:[this.state.startedTest?Object(d.jsx)("div",{className:"title-section",children:this.state.title}):null,this.state.startedTest?this.state.finishedTest?Object(d.jsxs)("div",{className:"score-section",children:["You scored ",this.state.currScore," out of ",this.state.questions.length,Object(d.jsx)("br",{}),"Average Score: ",this.state.averageScore,Object(d.jsx)("br",{}),"Total Takers: ",this.state.totalTakers]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"question-section",children:[Object(d.jsxs)("div",{className:"question-count",children:[Object(d.jsxs)("span",{children:[" Question ",this.state.currQuestion+1," "]})," of ",this.state.questions.length]}),Object(d.jsx)("div",{className:"question-text",children:this.state.questions[this.state.currQuestion].prompt})]}),Object(d.jsx)("div",{className:"answer-section",children:this.state.questions[this.state.currQuestion].choices.map((function(t,n){return Object(d.jsx)("div",{class:"btnwrap",children:Object(d.jsx)("button",{onClick:function(){return e.onAnswerChosen(t.isCorrect)},children:t.answerText})},n)}))})]}):Object(d.jsx)("div",{className:"start-button",children:Object(d.jsx)("button",{onClick:this.onTestInit,children:" Start Quiz "})}),Object(d.jsx)("div",{className:"btn-group",children:Object(d.jsx)("button",{onClick:function(){e.props.history.push("/EZ-Math-Editor")},children:" Switch to Editor Mode"})})]})}}]),n}(o.Component),j=n(109),x=n(25),g=n.n(x),v=n(36),N=n(98),m=n(99),O=(n(145),n(55)),S=n.n(O),k=n(100),y=n.n(k),w=n(72),T=n.n(w),C=(n(251),n(101)),I=n.n(C);window.jQuery=window.$=I.a;n(252),n(253);var q=n(102),E=n.n(q);n(256);window.katex=T.a;var F=[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],["image","blockquote","code-block"],["formula"],["clean"]],Q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).queryAndLoad=function(){console.log(o.props.selectedNote.id),f.firestore().collection("notes").doc(o.props.selectedNote.id).get().then((function(e){e.exists?o.loadIntoRTF(e.data().body):console.log("no data found")})).catch((function(e){console.log("error during query and load func")}))},o.loadIntoRTF=function(e){console.log(e),o.quill.current.editor.setContents(JSON.parse(e))},o.storeIntoDatabase=function(){var e=JSON.stringify(o.quill.current.editor.getContents());f.firestore().collection("notes").doc(o.props.selectedNote.id).update({body:e}).catch((function(e){console.log("error turing update op")}))},o.generatePDF=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.quill.current.editor.getContents(),e.next=3,m.pdfExporter.generatePdf(t);case 3:n=e.sent,Object(N.saveAs)(n,"pdf-export.pdf");case 5:case"end":return e.stop()}}),e)}))),o.onEditorUpdate=function(e,t,n){var o,s;return function(){function r(){o=null,n||(s=e.apply(c,i))}var c=this,i=arguments;return clearTimeout(o),o=setTimeout(r,t),n&&!o&&(s=e.apply(c,i)),s}}((function(){console.log("saved"),o.storeIntoDatabase()}),1500),o.publishTest=Object(v.a)(g.a.mark((function e(){var t,n,s,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=prompt("Enter Test Name","")){e.next=3;break}return e.abrupt("return");case 3:return n=JSON.stringify(o.quill.current.editor.getContents()),s={title:t,body:n},e.next=7,f.firestore().collection("tests").add({title:s.title,body:s.body,sumScore:0,sumTakers:0});case 7:r=e.sent,c=r.id,alert("TEST KEY: "+c);case 10:case"end":return e.stop()}}),e)}))),o.quill=s.a.createRef(),o.state={id:""},o}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;E()({Quill:S.a,katex:T.a})(this.quill.current.editor,this.props.options),this.setState({id:this.props.selectedNote.id},(function(){e.queryAndLoad()}))}},{key:"componentWillUnmount",value:function(){this.storeIntoDatabase()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.selectedNote.id!==this.state.id&&(console.log("switching note"),this.setState({id:this.props.selectedNote.id},(function(){e.queryAndLoad()})))}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(y.a,{ref:this.quill,id:"editor",modules:{formula:!0,toolbar:F},theme:"snow",onChange:this.onEditorUpdate}),Object(d.jsxs)("div",{className:"btn-group",children:[Object(d.jsx)("button",{onClick:this.generatePDF,children:"get your pdf"}),Object(d.jsx)("button",{onClick:this.publishTest,children:" Publish Test"})]})]})}}]),n}(s.a.Component);var D=n(13),M=function(e){return{root:{backgroundColor:e.palette.background.paper,height:"calc(100% - 35px)",position:"absolute",left:"0",width:"300px",boxShadow:"0px 0px 2px black"},newChatBtn:{borderRadius:"0px"},unreadMessage:{color:"red",position:"absolute",top:"0",right:"5px"},newNoteBtn:{width:"100%",height:"35px",borderBottom:"1px solid black",borderRadius:"0px",backgroundColor:"#0073d8",color:"white","&:hover":{backgroundColor:"#88a2ce"}},sidebarContainer:{marginTop:"0px",width:"300px",height:"100%",boxSizing:"border-box",float:"left",overflowY:"scroll",overflowX:"hidden"},newNoteInput:{width:"100%",margin:"0px",height:"35px",outline:"none",border:"none",paddingLeft:"5px","&:focus":{outline:"2px solid rgba(81, 203, 238, 1)"}},newNoteSubmitBtn:{width:"100%",backgroundColor:"#009364",borderRadius:"0px",color:"white"}}},A=n(285),B=n(284),R=n(286),P=function(e){return{listItem:{cursor:"pointer"},textSection:{maxWidth:"85%",fontWeight:"bold"},deleteIcon:{position:"absolute",right:"5px",top:"calc(50% - 15px)","&:hover":{color:"red"}}}},z=n(283),J=n(107),Z=n.n(J),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).selectNote=function(t,n){return e.props.selectNote(t,n)},e.deleteNote=function(t){window.confirm("Are you sure you wanna delete ".concat(t.title))&&e.props.deleteNote(t)},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,o=t.note,s=t.classes,r=t.selectedNoteIndex;return Object(d.jsx)("div",{children:Object(d.jsxs)(z.a,{className:s.listItem,selected:r===n,alignItems:"flex-start",children:[Object(d.jsxs)("div",{className:s.textSection,onClick:function(){return e.selectNote(o,n)},children:[o.title," "]}),Object(d.jsx)(Z.a,{className:s.deleteIcon,onClick:function(){return e.deleteNote(o)}})]})})}}]),n}(s.a.Component),U=Object(D.a)(P)(L),H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).createNoteSetup=function(){o.setState({title:null,addingNote:!o.state.addingNote})},o.createNote=function(){o.props.createNote(o.state.title),o.setState({title:null,addingNote:!1})},o.updateTitle=function(e){o.setState({title:e})},o.selectNote=function(e,t){o.props.selectNote(e,t)},o.deleteNote=function(e){o.props.deleteNote(e)},o.state={addingNote:!1,title:null},o}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.notes,o=t.classes,s=t.selectedNoteIndex;return n?Object(d.jsxs)("div",{className:o.sidebarContainer,children:[Object(d.jsx)(B.a,{onClick:this.createNoteSetup,className:o.newNoteBtn,children:this.state.addingNote?"cancel":"new file"}),this.state.addingNote?Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"text",className:o.newNoteInput,placeholder:"Enter file title",onKeyUp:function(t){return e.updateTitle(t.target.value)}}),Object(d.jsx)(B.a,{onClick:this.createNote,className:o.newNoteSubmitBtn,children:"Submit File"})]}):null,Object(d.jsx)(A.a,{children:n.map((function(t,n){return Object(d.jsxs)("div",{children:[Object(d.jsx)(U,{note:t,index:n,selectedNoteIndex:s,selectNote:e.selectNote,deleteNote:e.deleteNote}),Object(d.jsx)(R.a,{})]},n)}))})]}):Object(d.jsx)("div",{children:"Add a File!"})}}]),n}(s.a.Component),W=Object(D.a)(M)(H),K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).componentDidMount=function(){f.firestore().collection("notes").onSnapshot((function(t){var n=t.docs.map((function(e){var t=e.data();return t.id=e.id,t}));console.log(n),e.setState({notes:n})}))},e.selectNote=function(t,n){e.setState({selectedNoteIndex:n,selectedNote:t})},e.deleteNote=function(){var t=Object(v.a)(g.a.mark((function t(n){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.state.notes.indexOf(n),t.next=3,e.setState({notes:e.state.notes.filter((function(e){return n!==e}))});case 3:e.state.selectedNoteIndex===o?e.setState({selectedNoteIndex:null,selectedNote:null}):e.state.notes.elngth>1?e.selectNote(e.state.notes[e.state.selectedNotesIndex-1],e.state.selectedNoteIndex-1):e.setState({selectedNoteIndex:null,selectedNote:null}),f.firestore().collection("notes").doc(n.id).delete();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.createNote=function(){var t=Object(v.a)(g.a.mark((function t(n){var o,s,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("creating..."),o={title:n,body:'{"ops":[{"insert":"\\n\\n"}]}'},t.next=4,f.firestore().collection("notes").add({title:o.title,body:o.body,timestamp:f.firestore.FieldValue.serverTimestamp()});case 4:s=t.sent,r=s.id,e.setState({notes:[].concat(Object(j.a)(e.state.notes),[o])},(function(){var t=e.state.notes.indexOf(e.state.notes.filter((function(e){return e.id===r}))[0]);e.setState({selectedNote:e.state.notes[t],selectedNoteIndex:t})}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={selectedNoteIndex:null,selectedNote:null,notes:null},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{children:[Object(d.jsx)(W,{selectedNoteIndex:this.state.selectedNoteIndex,notes:this.state.notes,selectNote:this.selectNote,deleteNote:this.deleteNote,createNote:this.createNote}),Object(d.jsx)("div",{className:"container",children:this.state.selectedNote?Object(d.jsx)(Q,{selectedNoteIndex:this.state.selectedNoteIndex,selectedNote:this.state.selectedNote,notes:this.state.notes}):null}),Object(d.jsx)("div",{className:"btn-group",children:Object(d.jsx)("button",{onClick:function(){e.props.history.push("/EZ-Math-Tester")},children:" Switch to Test Mode"})})]})}}]),n}(o.Component),Y=n(108),G=n(8),X=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{id:"content",children:[" ",Object(d.jsxs)(Y.a,{children:[Object(d.jsx)(h,{}),Object(d.jsxs)(G.c,{children:[Object(d.jsx)(G.a,{path:"/EZ-Math-Editor",component:K}),Object(d.jsx)(G.a,{path:"/EZ-Math-Tester",component:b})]})]})]})}}]),n}(s.a.PureComponent),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,287)).then((function(t){var n=t.getCLS,o=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),o(e),s(e),r(e),c(e)}))};c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(X,{})}),document.getElementById("root")),V()},45:function(e,t,n){}},[[263,1,2]]]);
//# sourceMappingURL=main.850ea424.chunk.js.map